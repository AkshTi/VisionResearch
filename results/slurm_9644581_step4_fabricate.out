=========================================
Step 4: Fabricate Corrupted Histories
Action-Video Mismatch Experiment - Phase 2
=========================================

Job ID: 9644581
Node: node2705
Start time: Tue Feb 24 23:14:18 EST 2026

Python: /home/akshatat/.conda/envs/mech_interp_gpu/bin/python
Python version: Python 3.10.14

=========================================
Creating corrupted pose histories...
=========================================

============================================================
STEP 4: Fabricate mismatched history + measure impact
============================================================

--- Step 4.1: Building drift library from Phase 1 ---
  Drift statistics from Phase 1:
  10th percentile (low drift):  0.17°
  50th percentile (median):     0.46°
  90th percentile (high drift): 1.11°
  Low-drift sample:  sample_0001 (final err: 0.00°)
  High-drift sample: sample_0002 (final err: 1.24°)

--- Step 4.2: Creating corrupted pose histories ---
  sample_0000 scale=10.0: final corruption = 4.58°
  sample_0000 scale=50.0: final corruption = 22.89°
  sample_0000 scale=100.0: final corruption = 45.79°
  sample_0001 scale=10.0: final corruption = 4.58°
  sample_0001 scale=50.0: final corruption = 22.89°
  sample_0001 scale=100.0: final corruption = 45.79°
  sample_0002 scale=10.0: final corruption = 4.58°
  sample_0002 scale=50.0: final corruption = 22.89°
  sample_0002 scale=100.0: final corruption = 45.79°
  sample_0003 scale=10.0: final corruption = 4.58°
  sample_0003 scale=50.0: final corruption = 22.89°
  sample_0003 scale=100.0: final corruption = 45.79°
  sample_0004 scale=10.0: final corruption = 4.58°
  sample_0004 scale=50.0: final corruption = 22.89°
  sample_0004 scale=100.0: final corruption = 45.79°

--- Step 4.3: Regenerating with corrupted history ---
  
  To regenerate videos with corrupted poses, you have two options:
  
  OPTION A (Recommended): Modify RE10k data files
    1. Copy the RE10k clip data to a new directory
    2. Replace the pose values with corrupted ones
    3. Run DFoT on this modified dataset
    This keeps DFoT's code unchanged.
  
  OPTION B: Direct model API (requires more DFoT internals)
    1. Load the DFoT model programmatically
    2. Call its generation function with custom pose tensors
    3. Requires understanding DFoT's internal sample() API
  
  Helper script: runs/action_mismatch/phase2/regenerate_with_corruption.sh

--- Step 4.4: Evaluation template ---

  Saved: runs/action_mismatch/phase2/phase2_results.csv
  Plot saved: runs/action_mismatch/phase2/corruption_magnitudes.png

  ✅ Phase 2 corruption setup complete!
  Corrupted poses saved to runs/action_mismatch/phase2/
  
  TO COMPLETE PHASE 2:
  1. Regenerate videos with corrupted poses (see options above)
  2. Run step2 (pose estimation) on the new videos
  3. Compare clean vs corrupted pose accuracy & perceptual quality

=========================================
Step 4 Complete - Phase 2 Setup Done
=========================================
Exit code: 0
End time: Tue Feb 24 23:14:24 EST 2026

Corrupted poses saved to:
total 132K
-rw-rw-r-- 1 akshatat akshatat  56K Feb 24 23:14 corruption_magnitudes.png
-rw-rw-r-- 1 akshatat akshatat 2.1K Feb 24 23:14 phase2_manifest.json
-rw-rw-r-- 1 akshatat akshatat  583 Feb 24 23:14 phase2_results.csv
-rwxr-xr-x 1 akshatat akshatat 1.5K Feb 24 23:14 regenerate_with_corruption.sh
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0000_scale10.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0000_scale100.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0000_scale50.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0001_scale10.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0001_scale100.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0001_scale50.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0002_scale10.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0002_scale100.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0002_scale50.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0003_scale10.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0003_scale100.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0003_scale50.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0004_scale10.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0004_scale100.0
drwxrwxr-x 2 akshatat akshatat 4.0K Feb 24 23:14 sample_0004_scale50.0

Next: Regenerate videos with corrupted poses
See runs/action_mismatch/phase2/regenerate_with_corruption.sh
